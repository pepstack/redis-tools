#!/bin/bash
# create cluster once after starting all redis-servers
# 生成 redis 集群初始创建脚本. 不要使用 tls 端口做集群!
# redis cluster uri: [redis://host:port@cluster/]
#
echo "[redis://$REDIS_CLUSTER_ID] Creating cluster ..."

"$REDIS_CLUSTER_HOME/bin/redis-cli" \
        --cluster-replica $REDIS_CLUSTER_REPLICAS \
        --cluster create \
$(cat "$REDIS_CLUSTER_HOME/CLUSTER_ALL_NODES" | awk '{ print "        "$0" \\" }')
;
